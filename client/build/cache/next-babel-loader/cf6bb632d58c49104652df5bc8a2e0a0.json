{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from \"react\";\nimport SiteContext from \"../../context/site/siteContext\";\nimport AuthContext from \"../../context/auth/authContext\";\nimport Link from \"next/link\";\nimport { Formik, Form, Field } from \"formik\";\nimport * as Yup from \"yup\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUser, faEnvelope, faLock, faPhoneAlt, faBuilding, faExclamationTriangle, faMapPin } from \"@fortawesome/free-solid-svg-icons\";\nimport { faEye, faEyeSlash } from \"@fortawesome/free-regular-svg-icons\";\nimport Router from \"next/router\"; // Component import\n\nimport VerifyEmail from \"../utils/VerifyEmail\";\nimport Alert from \"../utils/Alert\";\nvar userRegistrationValidationSchema = Yup.object({\n  name: Yup.string().required(\"Please enter your name\").max(100).trim(),\n  email: Yup.string().email(\"Please enter a valid email id\").required(\"Please enter your email id\").max(50).trim(),\n  password: Yup.string().required(\"Please enter your password\").min(8, \"Your password should have at least 8 characters\").trim(),\n  mobile: Yup.string().matches(/^[0-9]+$/, \"Must be a number\"),\n  apartment: Yup.string().required(\"Please select your apartment/property\")\n});\nvar alertTheme = \"bg-blue-200 text-blue-800\";\n\nvar UserRegistration = function UserRegistration() {\n  var apartmentId;\n\n  var _useState = useState(false),\n      displayPassword = _useState[0],\n      setDisplayPassword = _useState[1];\n\n  var _useState2 = useState(\"visible\"),\n      parentDiv = _useState2[0],\n      setparentDiv = _useState2[1];\n\n  var _useState3 = useState(true),\n      showForm = _useState3[0],\n      setShowForm = _useState3[1];\n\n  var siteContext = useContext(SiteContext);\n  var fetchApartments = siteContext.fetchApartments,\n      numApartmentsFetched = siteContext.numApartmentsFetched,\n      apartmentData = siteContext.apartmentData;\n  var authContext = useContext(AuthContext);\n  var loadUser = authContext.loadUser,\n      user = authContext.user,\n      registerUser = authContext.registerUser,\n      isAuthenticated = authContext.isAuthenticated,\n      authError = authContext.authError;\n  useEffect(function () {\n    if (isAuthenticated) {\n      loadUser();\n      setShowForm(false);\n    }\n  }, [isAuthenticated]);\n\n  var searchApartment = function searchApartment(e) {\n    setparentDiv(\"visible\");\n    fetchApartments(e.target.value);\n\n    if (e.which === 13) {\n      e.preventDefault();\n    }\n  };\n\n  var setPasswordDisplay = function setPasswordDisplay() {\n    setDisplayPassword(!displayPassword);\n  };\n\n  return __jsx(AnimatePresence, {\n    exitBeforeEnter: true\n  }, showForm ? __jsx(motion.div, {\n    key: \"form\",\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0,\n      transition: {\n        duration: 0.3\n      }\n    },\n    className: \"rounded-md shadow-boxshadowregister bg-white p-12\"\n  }, __jsx(Formik, {\n    initialValues: {\n      name: \"\",\n      email: \"\",\n      mobile: \"\",\n      password: \"\",\n      apartment: \"\"\n    },\n    validationSchema: userRegistrationValidationSchema,\n    onSubmit: function onSubmit(values, _ref) {\n      var setSubmitting = _ref.setSubmitting;\n      setSubmitting(true);\n      apartmentId = apartmentData.find(function (o) {\n        return o.name === values.apartment;\n      });\n      registerUser(values.name, values.email, values.mobile, values.password, apartmentId.id);\n      setSubmitting(false);\n    }\n  }, function (props) {\n    return __jsx(\"div\", null, __jsx(\"h2\", {\n      className: \"font-axiforma font-bold text-3xl text-center text-brand-gray tracking-wide mb-4\"\n    }, \"Let's begin!\"), __jsx(Alert, {\n      authError: authError,\n      alertTheme: alertTheme\n    }), __jsx(Form, null, __jsx(\"div\", {\n      className: \"\\\"flex items-center justify-center border-2 rounded-md \\\" \".concat(props.touched.name && props.errors.name ? \"mb-1 border-red-800\" : \"mb-4 border-gray-300\")\n    }, __jsx(FontAwesomeIcon, {\n      icon: faUser,\n      className: \"inline fill-current text-gray-600 text-lg opacity-50 ml-4\"\n    }), __jsx(Field, {\n      id: \"name\",\n      name: \"name\",\n      type: \"text\",\n      placeholder: \"Name*\",\n      maxLength: \"50\",\n      autoComplete: \"off\",\n      autoFocus: \"\",\n      className: \"textbox-input w-10/12 placeholder-purple-900 placeholder-opacity-50\"\n    })), props.touched.name && props.errors.name ? __jsx(\"div\", {\n      className: \"font-axiforma text-xs text-red-800 p-1 mb-2\"\n    }, __jsx(FontAwesomeIcon, {\n      icon: faExclamationTriangle\n    }), \" \", props.errors.name) : null, __jsx(\"div\", {\n      className: \"\\\"flex items-center justify-center border-2 rounded-md \\\" \".concat(props.touched.email && props.errors.email ? \"mb-1 border-red-800\" : \"mb-4 border-gray-300\")\n    }, __jsx(FontAwesomeIcon, {\n      icon: faEnvelope,\n      className: \"inline align-middle fill-current text-gray-600 text-lg opacity-50 ml-4\"\n    }), __jsx(Field, {\n      id: \"email\",\n      name: \"email\",\n      type: \"text\",\n      placeholder: \"Email*\",\n      maxLength: \"50\",\n      autoComplete: \"off\",\n      autoFocus: \"\",\n      className: \"textbox-input w-10/12 placeholder-purple-900 placeholder-opacity-50\"\n    })), props.touched.email && props.errors.email ? __jsx(\"div\", {\n      className: \"font-axiforma text-xs text-red-800 p-1 mb-2\"\n    }, __jsx(FontAwesomeIcon, {\n      icon: faExclamationTriangle\n    }), \" \", props.errors.email) : null, __jsx(\"div\", {\n      className: \"\\\"flex items-center justify-center border-2 rounded-md \\\" \".concat(props.touched.mobile && props.errors.mobile ? \"mb-1 border-red-800\" : \"mb-4 border-gray-300\")\n    }, __jsx(FontAwesomeIcon, {\n      icon: faPhoneAlt,\n      className: \"inline align-middle fill-current text-gray-600 text-lg opacity-50 ml-4\"\n    }), __jsx(Field, {\n      id: \"mobile\",\n      name: \"mobile\",\n      type: \"text\",\n      placeholder: \"Mobile\",\n      maxLength: \"15\",\n      autoComplete: \"off\",\n      autoFocus: \"\",\n      className: \"textbox-input w-10/12 placeholder-purple-900 placeholder-opacity-50\"\n    })), props.touched.mobile && props.errors.mobile ? __jsx(\"div\", {\n      className: \"font-axiforma text-xs text-red-800 p-1 mb-2\"\n    }, __jsx(FontAwesomeIcon, {\n      icon: faExclamationTriangle\n    }), \" \", props.errors.mobile) : null, __jsx(\"div\", {\n      className: \"\\\"flex items-center justify-center border-2 rounded-md \\\" \".concat(props.touched.password && props.errors.password ? \"mb-1 border-red-800\" : \"mb-4 border-gray-300\")\n    }, __jsx(FontAwesomeIcon, {\n      icon: faLock,\n      className: \"inline align-middle fill-current text-gray-600 text-lg opacity-50 ml-4\"\n    }), __jsx(Field, {\n      id: \"password\",\n      name: \"password\",\n      type: !displayPassword ? \"password\" : \"text\",\n      placeholder: \"Password*\",\n      maxLength: \"50\",\n      autoComplete: \"off\",\n      autoFocus: \"\",\n      className: \"textbox-input w-9/12 md:w-10/12 placeholder-purple-900 placeholder-opacity-50\"\n    }), __jsx(FontAwesomeIcon, {\n      icon: !displayPassword ? faEye : faEyeSlash,\n      className: \"text-sm align-middle top-0 right-0 opacity-50 cursor-pointer\",\n      onClick: setPasswordDisplay,\n      \"aria-label\": !displayPassword ? \"Show Password\" : \"Hide Password\"\n    })), props.touched.password && props.errors.password ? __jsx(\"div\", {\n      className: \"font-axiforma text-xs text-red-800 p-1 mb-2\"\n    }, __jsx(FontAwesomeIcon, {\n      icon: faExclamationTriangle\n    }), \" \", props.errors.password) : null, __jsx(\"div\", {\n      className: \"\\\"flex items-center justify-center border-2 rounded-md \\\" \".concat(props.touched.apartment && props.errors.apartment ? \"mb-1 border-red-800\" : \"border-gray-300\")\n    }, __jsx(FontAwesomeIcon, {\n      icon: faBuilding,\n      className: \"inline align-middle fill-current text-gray-600 text-lg opacity-50 ml-4\"\n    }), __jsx(Field, {\n      id: \"apartment\",\n      name: \"apartment\",\n      type: \"text\",\n      placeholder: \"Search Apartment*\",\n      maxLength: \"100\",\n      autoComplete: \"off\",\n      autoFocus: \"\",\n      onKeyUp: searchApartment,\n      className: \"textbox-input w-10/12 placeholder-purple-900 placeholder-opacity-50\"\n    })), props.touched.apartment && props.errors.apartment ? __jsx(\"div\", {\n      className: \"font-axiforma text-xs text-red-800 p-1 mb-2\"\n    }, __jsx(FontAwesomeIcon, {\n      icon: faExclamationTriangle\n    }), \" \", props.errors.apartment) : null, __jsx(\"div\", {\n      className: \"relative \"\n    }, __jsx(\"div\", {\n      className: numApartmentsFetched > 0 ? \"search-results border-blue-400 w-full overflow-auto\" + \" \" + parentDiv : \"invisible\"\n    }, apartmentData.length > 0 && apartmentData.map(function (o, index) {\n      return __jsx(motion.div, {\n        key: index,\n        className: \"cursor-pointer\",\n        whileHover: {\n          color: \"#667EEA\",\n          fontWeight: \"bold\"\n        },\n        onClick: function onClick() {\n          props.setFieldValue(apartment, props.values.apartment = o.name);\n          setparentDiv(\"invisible\");\n        }\n      }, __jsx(FontAwesomeIcon, {\n        icon: faBuilding,\n        className: \"inline mr-2 text-lg align-middle\"\n      }), __jsx(\"p\", {\n        className: \"text-base align-middle inline\",\n        key: index,\n        value: o.name\n      }, o.name), __jsx(\"br\", null), __jsx(FontAwesomeIcon, {\n        icon: faMapPin,\n        className: \"inline mr-1 align-middle\"\n      }), __jsx(\"p\", {\n        className: \"text-xs mt-1 mb-1 inline align-middle\"\n      }, o.address1, \", \", o.city, \" - \", o.pincode), __jsx(\"hr\", {\n        className: \"border-1 border-indigo-700 mt-1 mb-3\"\n      }));\n    }))), __jsx(\"div\", {\n      className: \"relative\"\n    }, __jsx(\"div\", {\n      className: props.values.apartment === \"\" ? \"hidden\" : numApartmentsFetched === 0 ? \"absolute p-2 pt-4 mt-1 border-2 border-solid border-blue-400 bg-white rounded-lg  text-brand-gray; w-full h-20 align-middle overflow-auto\" : \"hidden\"\n    }, \"Not found? You can create a neighborhood for\", \" \", __jsx(Link, {\n      href: \"/register\"\n    }, __jsx(\"a\", {\n      className: \"text-blue-700 font-bold underline\"\n    }, props.values.apartment)), \" \", \"and then register. It's\", \" \", __jsx(\"span\", {\n      className: \"font-semibold text-blue-700\"\n    }, \"absolutely free!\"))), __jsx(\"div\", null, __jsx(motion.button, {\n      whileTap: {\n        backgroundColor: \"#7F9CF5\",\n        y: \"5px\",\n        boxShadow: \"0px 8px 15px rgba(151, 201, 251, 0.2)\"\n      },\n      className: \"mt-6 mb-8 w-64 md:w-100 h-12 bg-blue-600 text-white font-axiforma font-bold rounded-md uppercase tracking-wide focus:outline-none\",\n      type: \"submit\",\n      \"arira-aria-label\": \"User registration button\"\n    }, \"Register\"))), __jsx(\"div\", {\n      className: \"font-axiforma text-blue-700 text-center mt-4 text-sm  lg:text-md\"\n    }, \"Already have an account?\", \" \", __jsx(motion.button, {\n      className: \"ml-2 inline bg-opacity-25 bg-blue-400 text-brand-gray p-3 shadow-sm  font-semibold focus:outline-none\",\n      whileHover: {\n        backgroundColor: \"#4C51BF\",\n        color: \"#FFFFFF\"\n      },\n      onClick: function onClick() {\n        Router.push(\"/login\");\n      },\n      \"aria-label\": \"Button for login page\"\n    }, \"Login\")));\n  })) : __jsx(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.3\n    },\n    className: \"rounded-md shadow-boxshadowregister bg-white p-12\"\n  }, __jsx(VerifyEmail, {\n    user: user\n  })));\n};\n\nexport default UserRegistration;","map":null,"metadata":{},"sourceType":"module"}