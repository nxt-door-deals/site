{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\nxt_door_deals\\\\site\\\\client\\\\context\\\\site\\\\SiteState.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useReducer } from \"react\";\nimport siteReducer from \"./siteReducer\";\nimport SiteContext from \"./siteContext\";\nimport axios from \"axios\";\nimport { FETCH_APARTMENT, FETCH_APARTMENT_ERROR, LOADING, CLEAR_APARTMENT_SEARCH_RESULTS } from \"../Types\";\n\nvar SiteState = function SiteState(props) {\n  _s();\n\n  var initialState = {\n    numApartmentsFetched: \"\",\n    fetchError: null,\n    loading: false,\n    apartmentData: \"\"\n  };\n\n  var _useReducer = useReducer(siteReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var fetchApartments = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(aptName) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(process.env.NEXT_PUBLIC_API_PROXY, \"/apartments/search/?name=\").concat(aptName));\n\n            case 3:\n              res = _context.sent;\n              dispatch({\n                type: FETCH_APARTMENT,\n                payload: res.data\n              });\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              dispatch({\n                type: FETCH_APARTMENT_ERROR,\n                payload: _context.t0.response.data.detail\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchApartments(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var clearApartmentSearchResults = function clearApartmentSearchResults() {\n    dispatch({\n      type: CLEAR_APARTMENT_SEARCH_RESULTS\n    });\n  };\n\n  var setLoading = function setLoading() {\n    dispatch({\n      type: LOADING\n    });\n  };\n\n  return __jsx(SiteContext.Provider, {\n    value: {\n      numApartmentsFetched: state.numApartmentsFetched,\n      loading: state.loading,\n      apartmentData: state.apartmentData,\n      fetchError: state.fetchError,\n      fetchApartments: fetchApartments,\n      clearApartmentSearchResults: clearApartmentSearchResults,\n      setLoading: setLoading\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\n_s(SiteState, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\n\n_c = SiteState;\nexport default SiteState;\n\nvar _c;\n\n$RefreshReg$(_c, \"SiteState\");","map":{"version":3,"sources":["C:/nxt_door_deals/site/client/context/site/SiteState.jsx"],"names":["React","useReducer","siteReducer","SiteContext","axios","FETCH_APARTMENT","FETCH_APARTMENT_ERROR","LOADING","CLEAR_APARTMENT_SEARCH_RESULTS","SiteState","props","initialState","numApartmentsFetched","fetchError","loading","apartmentData","state","dispatch","fetchApartments","aptName","get","process","env","NEXT_PUBLIC_API_PROXY","res","type","payload","data","response","detail","clearApartmentSearchResults","setLoading","children"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SACEC,eADF,EAEEC,qBAFF,EAGEC,OAHF,EAIEC,8BAJF,QAKO,UALP;;AAOA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAW;AAAA;;AAC3B,MAAMC,YAAY,GAAG;AACnBC,IAAAA,oBAAoB,EAAE,EADH;AAEnBC,IAAAA,UAAU,EAAE,IAFO;AAGnBC,IAAAA,OAAO,EAAE,KAHU;AAInBC,IAAAA,aAAa,EAAE;AAJI,GAArB;;AAD2B,oBAQDd,UAAU,CAACC,WAAD,EAAcS,YAAd,CART;AAAA,MAQpBK,KARoB;AAAA,MAQbC,QARa;;AAU3B,MAAMC,eAAe;AAAA,wEAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEFf,KAAK,CAACgB,GAAN,WACbC,OAAO,CAACC,GAAR,CAAYC,qBADC,sCACgDJ,OADhD,EAFE;;AAAA;AAEdK,cAAAA,GAFc;AAMpBP,cAAAA,QAAQ,CAAC;AAAEQ,gBAAAA,IAAI,EAAEpB,eAAR;AAAyBqB,gBAAAA,OAAO,EAAEF,GAAG,CAACG;AAAtC,eAAD,CAAR;AANoB;AAAA;;AAAA;AAAA;AAAA;AAQpBV,cAAAA,QAAQ,CAAC;AACPQ,gBAAAA,IAAI,EAAEnB,qBADC;AAEPoB,gBAAAA,OAAO,EAAE,YAAIE,QAAJ,CAAaD,IAAb,CAAkBE;AAFpB,eAAD,CAAR;;AARoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAfX,eAAe;AAAA;AAAA;AAAA,KAArB;;AAeA,MAAMY,2BAA2B,GAAG,SAA9BA,2BAA8B,GAAM;AACxCb,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAEjB;AAAR,KAAD,CAAR;AACD,GAFD;;AAIA,MAAMuB,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBd,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAElB;AAAR,KAAD,CAAR;AACD,GAFD;;AAIA,SACE,MAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLK,MAAAA,oBAAoB,EAAEI,KAAK,CAACJ,oBADvB;AAELE,MAAAA,OAAO,EAAEE,KAAK,CAACF,OAFV;AAGLC,MAAAA,aAAa,EAAEC,KAAK,CAACD,aAHhB;AAILF,MAAAA,UAAU,EAAEG,KAAK,CAACH,UAJb;AAKLK,MAAAA,eAAe,EAAfA,eALK;AAMLY,MAAAA,2BAA2B,EAA3BA,2BANK;AAOLC,MAAAA,UAAU,EAAVA;AAPK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWGrB,KAAK,CAACsB,QAXT,CADF;AAeD,CAhDD;;GAAMvB,S;;KAAAA,S;AAkDN,eAAeA,SAAf","sourcesContent":["import React, { useReducer } from \"react\";\r\nimport siteReducer from \"./siteReducer\";\r\nimport SiteContext from \"./siteContext\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  FETCH_APARTMENT,\r\n  FETCH_APARTMENT_ERROR,\r\n  LOADING,\r\n  CLEAR_APARTMENT_SEARCH_RESULTS,\r\n} from \"../Types\";\r\n\r\nconst SiteState = (props) => {\r\n  const initialState = {\r\n    numApartmentsFetched: \"\",\r\n    fetchError: null,\r\n    loading: false,\r\n    apartmentData: \"\",\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(siteReducer, initialState);\r\n\r\n  const fetchApartments = async (aptName) => {\r\n    try {\r\n      const res = await axios.get(\r\n        `${process.env.NEXT_PUBLIC_API_PROXY}/apartments/search/?name=${aptName}`\r\n      );\r\n\r\n      dispatch({ type: FETCH_APARTMENT, payload: res.data });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: FETCH_APARTMENT_ERROR,\r\n        payload: err.response.data.detail,\r\n      });\r\n    }\r\n  };\r\n\r\n  const clearApartmentSearchResults = () => {\r\n    dispatch({ type: CLEAR_APARTMENT_SEARCH_RESULTS });\r\n  };\r\n\r\n  const setLoading = () => {\r\n    dispatch({ type: LOADING });\r\n  };\r\n\r\n  return (\r\n    <SiteContext.Provider\r\n      value={{\r\n        numApartmentsFetched: state.numApartmentsFetched,\r\n        loading: state.loading,\r\n        apartmentData: state.apartmentData,\r\n        fetchError: state.fetchError,\r\n        fetchApartments,\r\n        clearApartmentSearchResults,\r\n        setLoading,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </SiteContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SiteState;\r\n"]},"metadata":{},"sourceType":"module"}