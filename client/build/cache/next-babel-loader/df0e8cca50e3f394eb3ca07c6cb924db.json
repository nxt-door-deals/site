{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext, useState, Fragment } from \"react\";\nimport SiteContext from \"../../context/site/siteContext\";\nimport { Formik, Field, Form } from \"formik\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport * as Yup from \"yup\";\nimport { motion } from \"framer-motion\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch, faMapPin, faBuilding } from \"@fortawesome/free-solid-svg-icons\";\nvar apartmentSearchValidationSchema = Yup.object({\n  apartment: Yup.string().required(\"Please select your neighbourhood\")\n});\n\nvar ApartmentSearch = function ApartmentSearch() {\n  var _useState = useState(\"visible\"),\n      parentDiv = _useState[0],\n      setparentDiv = _useState[1];\n\n  var siteContext = useContext(SiteContext);\n  var fetchApartments = siteContext.fetchApartments,\n      numApartmentsFetched = siteContext.numApartmentsFetched,\n      apartmentData = siteContext.apartmentData,\n      clearApartmentSearchResults = siteContext.clearApartmentSearchResults;\n\n  var searchApartment = function searchApartment(e) {\n    setparentDiv(\"visible\");\n    fetchApartments(e.target.value);\n\n    if (e.which === 13) {\n      e.preventDefault();\n    }\n  };\n\n  return __jsx(Fragment, null, __jsx(Formik, {\n    initialValues: {\n      apartment: \"\"\n    },\n    validationSchema: apartmentSearchValidationSchema,\n    onSubmit: function onSubmit(values, _ref) {\n      var setSubmitting = _ref.setSubmitting;\n      setSubmitting(true);\n      clearApartmentSearchResults();\n      Router.push(\"/ads/\".concat(values.apartment));\n      setSubmitting(false);\n    }\n  }, function (props) {\n    return __jsx(Form, {\n      onKeyPress: function onKeyPress(e) {\n        if (e.key === \"Enter\") e.preventDefault();\n      }\n    }, __jsx(\"div\", {\n      className: \"\\\"flex mt-6 border-2 rounded-md \\\" \".concat(props.errors.apartment && props.touched.apartment ? \"border-red-900\" : \"border-purple-900\")\n    }, __jsx(FontAwesomeIcon, {\n      icon: faSearch,\n      className: \"inline align-middle text-lg fill-current text-gray-600 opacity-50 ml-2\",\n      alt: \"Search Apartment\"\n    }), __jsx(Field, {\n      id: \"apartment\",\n      name: \"apartment\",\n      type: \"input\",\n      placeholder: \"Search Apartment\",\n      className: \"textbox-input lg:w-9/12 xl:w-11/12 placeholder-purple-900 placeholder-opacity-50\",\n      maxLength: \"100\",\n      autoComplete: \"off\",\n      autoFocus: true,\n      onKeyUp: searchApartment\n    })), props.touched.apartment && props.errors.apartment ? __jsx(\"div\", {\n      className: \"font-axiforma absolute text-xs text-red-800 p-1\"\n    }, props.errors.apartment) : null, __jsx(\"div\", {\n      className: \"relative \"\n    }, __jsx(\"div\", {\n      className: numApartmentsFetched > 0 ? \"search-results border-purple-400 w-full overflow-auto\" + \" \" + parentDiv : \"invisible\"\n    }, apartmentData.length > 0 && apartmentData.map(function (o, index) {\n      return __jsx(motion.div, {\n        key: index,\n        className: \"cursor-pointer\",\n        whileHover: {\n          color: \"#553C9A\",\n          fontWeight: \"bold\"\n        },\n        onClick: function onClick() {\n          props.setFieldValue(apartment, props.values.apartment = o.name);\n          setparentDiv(\"invisible\");\n        }\n      }, __jsx(FontAwesomeIcon, {\n        icon: faBuilding,\n        className: \"inline mr-2 text-lg align-middle\"\n      }), __jsx(\"p\", {\n        className: \"text-base align-middle inline\",\n        key: index,\n        value: o.name\n      }, o.name), __jsx(\"br\", null), __jsx(FontAwesomeIcon, {\n        icon: faMapPin,\n        className: \"inline mr-1 align-middle\"\n      }), __jsx(\"p\", {\n        className: \"text-xs mt-1 mb-1 inline align-middle\"\n      }, o.address1, \", \", o.city, \" - \", o.pincode), __jsx(\"hr\", {\n        className: \"border-1 border-brand-purple mt-1 mb-3\"\n      }));\n    }))), __jsx(\"div\", {\n      className: \"relative\"\n    }, __jsx(\"div\", {\n      className: props.values.apartment === \"\" ? \"hidden\" : numApartmentsFetched === 0 ? \"absolute p-2 pt-5 mt-1 border-2 border-solid border-purple-400 bg-white z-20 rounded-lg  text-brand-gray; w-full h-20 align-middle overflow-auto\" : \"hidden\"\n    }, \"Not found? Create a neighborhood for\", \" \", __jsx(Link, {\n      href: \"/register\"\n    }, __jsx(\"a\", {\n      className: \"text-purple-700 font-bold underline\"\n    }, props.values.apartment)), \" \", \". It's\", \" \", __jsx(\"span\", {\n      className: \"font-semibold text-brand-purple\"\n    }, \"absolutely free!\"))), __jsx(\"div\", null, __jsx(motion.button, {\n      type: \"submit\",\n      disabled: props.isSubmitting,\n      className: \"mt-8 p-0 w-48 h-12 rounded-lg bg-purple-500 text-white uppercase font-bold text-center tracking-wide cursor-pointer focus:outline-none\",\n      whileTap: {\n        backgroundColor: \"#D6BCFA\",\n        color: \"#550052\",\n        y: \"5px\",\n        boxShadow: \"0px 8px 15px rgba(270, 90, 56, 0.15)\"\n      },\n      \"aria-label\": \"Browse Advertisements\"\n    }, !props.isSubmitting ? \"Browse Ads\" : \"Searching...\")));\n  }));\n};\n\nexport default ApartmentSearch;","map":null,"metadata":{},"sourceType":"module"}