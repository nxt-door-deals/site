{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from \"react\";\nimport AuthContext from \"../../context/auth/authContext\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faInfoCircle, faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport { motion } from \"framer-motion\";\nimport Popup from \"reactjs-popup\";\n\nconst VerifyEmail = ({\n  user\n}) => {\n  const authContext = useContext(AuthContext);\n  const {\n    sendEmail,\n    updateEmailVerificationTimestamp\n  } = authContext;\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n\n  const closeModal = () => setOpen(false);\n\n  var name = user.name !== null ? user.name : \"friend\";\n  var email = user.email !== null ? user.email : \"registered email\";\n  var id = user.id !== null && user.id;\n  var email_hash = user.email_verification_hash !== null && user.email_verification_hash;\n  const fullVerificationString = email_hash + \"|\" + id;\n  const verificationUrl = `http://localhost:3000/verifyemail/${fullVerificationString}`;\n  useEffect(() => {\n    sendEmail(name, email, verificationUrl);\n  }, []);\n  return __jsx(\"div\", {\n    className: `\"font-axiforma text-center \" ${open ? \"opacity-25\" : null} `\n  }, __jsx(\"h2\", {\n    className: \"font-bold text-3xl text-brand-gray tracking-wide mb-4\"\n  }, \"One final step...\"), __jsx(\"div\", {\n    className: \"flex justify-center items-center p-5\"\n  }, __jsx(\"img\", {\n    src: \"/images/user_registration/email.svg\",\n    height: \"200px\",\n    width: \"200px\",\n    alt: \"Mailbox\"\n  })), __jsx(\"p\", {\n    className: \"text-base text-gray-600\"\n  }, \"Hello, \", __jsx(\"span\", {\n    className: \"font-bold text-blue-600\"\n  }, name), \". Thank you for signing up!\"), __jsx(\"br\", null), __jsx(\"p\", {\n    className: \"text-base text-gray-600\"\n  }, \"Please verify your email using the link that was just sent to\", \" \", __jsx(\"span\", {\n    className: \"font-bold text-blue-600\"\n  }, email), \". The link is valid for 24 hours only.\"), __jsx(\"br\", null), __jsx(\"p\", {\n    className: \"text-xs text-gray-600 mb-2\"\n  }, \"Want to verify later?\"), __jsx(motion.button, {\n    whileTap: {\n      backgroundColor: \"#4C51BF\",\n      y: \"2px\",\n      boxShadow: \"0px 8px 15px rgba(144, 181, 218, 0.15)\"\n    },\n    className: \"font-semibold text-sm text-white p-3 rounded-md bg-blue-500 \\r uppercase mb-4 focus:outline-none\",\n    onClick: () => {\n      user !== null && Router.push(`/ads/${user.apartment_name}`);\n    }\n  }, \"Continue to site\"), __jsx(\"p\", {\n    className: \"text-xs text-gray-600\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faInfoCircle\n  }), \" Please note that you will not be able to post ad's without verifying your email.\"), __jsx(\"br\", null), __jsx(\"p\", {\n    className: \"text-sm text-center  text-gray-600\"\n  }, \"Didn't receive our email?\", \" \", __jsx(\"span\", {\n    className: \"text-blue-600\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: e => {\n      e.preventDefault();\n      updateEmailVerificationTimestamp(user.id);\n      sendEmail(name, email, verificationUrl);\n      setOpen(o => !o);\n    }\n  }, \"Resend email\")), __jsx(Popup, {\n    open: open,\n    closeOnDocumentClick: true,\n    onClose: closeModal\n  }, __jsx(\"div\", {\n    className: \"font-axiforma text-brand-gray text-sm bg-gray-300 opacity-90 flex justify-center items-center p-6 tracking-wide rounded-md\"\n  }, \"The email has been resent to\\xA0\", __jsx(\"span\", {\n    className: \"font-semibold text-blue-500\"\n  }, \" \", email), __jsx(\"div\", {\n    class: \"inline absolute top-0 right-0 mr-2 mt-1\"\n  }, __jsx(FontAwesomeIcon, {\n    className: \"cursor-pointer\",\n    icon: faWindowClose,\n    onClick: () => {\n      closeModal();\n    }\n  })))))));\n};\n\nexport default VerifyEmail;","map":null,"metadata":{},"sourceType":"module"}